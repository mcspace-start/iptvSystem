import{_ as re,r as i,a as m,c as H,o as g,b as e,d as o,X as ie,w as l,C as ue,D as pe,B as de,g as x,q as L,j as C,E as te,i as _e,F as O,l as N,m as p,A as X,y as ye,s as le,z as he,G as De,H as ke,e as Ve,v as we,U as Ie,t as Q,V as xe,x as Ae,T as ze,a7 as Pe,W as $e,M as Re,S as Le,Q as Ne}from"./index-DMhmhxta.js";/* empty css                    *//* empty css                 *//* empty css                  *//* empty css               *//* empty css                 *//* empty css                        *//* empty css                   */const qe={class:"server-config"},Te={class:"save-btn-wrap"},Be="/getServerConfig",He="/saveServerConfig",Oe={__name:"ServerConfig",setup(ae){const _=i({server_url:""});let D={};const b={server_url:[{required:!0,message:"请输入服务器地址",trigger:"blur"},{type:"url",message:"请输入正确的服务器地址格式",trigger:"blur"}]},A=i(!1),k=async()=>{A.value=!0;try{const u=await N.get(Be);u.code==200?(_.value=u.data,D={...u.data}):(p.error("获取服务器地址失败！"),console.log(u.msg))}catch(u){p.error(u.msg||"请求失败！"),console.log(u)}finally{A.value=!1}};k();const d=i(!1),c=i(null),h=i(!1),V=()=>{if(A.value)return p.info("正在加载数据，请稍后");d.value=!0},E=()=>{h.value||(c.value.clearValidate(),d.value=!1,_.value={...D})},v=()=>{h.value||c.value.validate(async u=>{if(!u)return;if(_.value.server_url==D.server_url)return p.warning("未作出修改");const n={path:_.value.server_url};h.value=!0;try{const w=await N.get(He,{params:n});w.code==200?(X.success({title:"保存配置成功！",showClose:!1}),k(),d.value=!1):(p.error(w.msg||"保存配置失败！"),console.log(w.msg))}catch(w){p.error(w.msg||"请求错误！"),console.log(w)}finally{h.value=!1}})};return(u,n)=>{const w=ie,z=pe,q=ue,S=de,I=m("Edit"),F=te,T=_e,W=m("Close"),y=m("Check");return g(),H(O,null,[e(w,{title:"设置IPTV服务器地址，用于系统连接和获取频道信息。",type:"primary","show-icon":"",closable:!1}),o("div",qe,[n[4]||(n[4]=o("p",{class:"IP-title"},"服务器地址：",-1)),e(S,{model:_.value,rules:b,ref_key:"serverConfigFormRef",ref:c},{default:l(()=>[e(q,{prop:"server_url"},{default:l(()=>[e(z,{modelValue:_.value.server_url,"onUpdate:modelValue":n[0]||(n[0]=a=>_.value.server_url=a),placeholder:"如：http://127.0.0.1:3000",size:"large",disabled:!d.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"]),n[5]||(n[5]=o("p",{class:"IP-desc"}," 输入服务器的完整URL，包括协议（http或https）和端口（如果需要） ",-1)),o("div",Te,[d.value?L("",!0):(g(),x(T,{key:0,type:"primary",size:"large",onClick:V},{icon:l(()=>[e(F,null,{default:l(()=>[e(I)]),_:1})]),default:l(()=>[n[1]||(n[1]=C(" 编辑配置 ",-1))]),_:1,__:[1]})),d.value?(g(),x(T,{key:1,type:"danger",size:"large",onClick:E,disabled:h.value},{icon:l(()=>[e(F,null,{default:l(()=>[e(W)]),_:1})]),default:l(()=>[n[2]||(n[2]=C(" 取消 ",-1))]),_:1,__:[2]},8,["disabled"])):L("",!0),d.value?(g(),x(T,{key:2,type:"success",size:"large",onClick:v,loading:h.value},{icon:l(()=>[e(F,null,{default:l(()=>[e(y)]),_:1})]),default:l(()=>[n[3]||(n[3]=C(" 保存配置 ",-1))]),_:1,__:[3]},8,["loading"])):L("",!0)])])],64)}}},We=re(Oe,[["__scopeId","data-v-f5f256dd"]]),Ge={class:"default-auth"},Je={class:"header"},Ke={class:"title hidden-xs-only"},Ze={class:"btn-wrap"},je={class:"content"},Qe="/defaultServerAuth",Xe="/saveDefaultServerAuth",Ye={__name:"DefaultAuth",setup(ae){const _=i({area_name:"",user_id:"",lang:"zh-CN",support_hd:"",net_user_id:"",dhcp_user_id:"",authenticator:"",stb_type:"",stb_version:"",conn_type:0,stb_id:"",template_name:"",area_id:"",user_token:"",user_group_id:"",product_package_id:"",mac:"00:00:00:00:00:00",user_field:0,software_version:"",desktop_id:"",is_smart_stb:!1,stb_maker:"",vip:""}),D=i({}),b=[{label:"区域名称",type:"text",prop:"area_name",placeholder:"请输入区域名称"},{label:"用户ID (user_id)",type:"text",prop:"user_id",placeholder:"请输入用户ID"},{label:"语言 (lang)",type:"text",prop:"lang",placeholder:"请输入语言,例如:zh-CN"},{label:"DHCP用户ID (dhcp_user_id)",type:"text",prop:"dhcp_user_id",placeholder:"请输入DHCP用户ID"},{label:"认证码 (authenticator)",type:"text",prop:"authenticator",placeholder:"请输入认证码"},{label:"机顶盒类型 (stb_type)",type:"text",prop:"stb_type",placeholder:"请输入机顶盒类型"},{label:"机顶盒版本 (stb_version)",type:"text",prop:"stb_version",placeholder:"请输入机顶盒版本"},{label:"连接类型 (conn_type)",type:"number",prop:"conn_type",placeholder:"请输入连接类型(数字)"},{label:"机顶盒ID (stb_id)",type:"text",prop:"stb_id",placeholder:"请输入机顶盒ID"},{label:"模板名称 (template_name)",type:"text",prop:"template_name",placeholder:"请输入模板名称"},{label:"区域ID (area_id)",type:"text",prop:"area_id",placeholder:"请输入区域ID"},{label:"用户令牌 (user_token)",type:"text",prop:"user_token",placeholder:"请输入用户令牌"},{label:"用户组ID (user_group_id)",type:"text",prop:"user_group_id",placeholder:"请输入用户组ID"},{label:"产品包ID (product_package_id)",type:"text",prop:"product_package_id",placeholder:"请输入产品包ID"},{label:"MAC地址 (mac)",type:"text",prop:"mac",placeholder:"请输入MAC地址,例如:00:11:22:33:44:55"},{label:"用户字段 (user_field)",type:"number",prop:"user_field",placeholder:"请输入用户字段(数字)"},{label:"软件版本 (software_version)",type:"text",prop:"software_version",placeholder:"请输入软件版本"},{label:"是否智能机顶盒 (is_smart_stb)",type:"select",prop:"is_smart_stb",placeholder:"请选择是否为智能机顶盒",options:[{label:"是",value:!0},{label:"否",value:!1}]},{label:"桌面ID (desktop_id)",type:"text",prop:"desktop_id",placeholder:"请输入桌面ID"},{label:"机顶盒制造商 (stb_maker)",type:"text",prop:"stb_maker",placeholder:"请输入机顶盒制造商"},{label:"VIP状态 (vip)",type:"text",prop:"vip",placeholder:"请输入VIP状态"}],A={area_name:[{required:!0,message:"区域名称为必填项",trigger:"blur"}],user_id:[{required:!0,message:"用户ID为必填项",trigger:"blur"}],authenticator:[{required:!0,message:"认证码为必填项",trigger:"blur"}],stb_id:[{required:!0,message:"机顶盒ID为必填项",trigger:"blur"}],mac:[{pattern:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,message:"请输入有效的MAC地址（如 00:11:22:33:44:55 或 00-11-22-33-44-55）",trigger:"blur"}],lang:[{pattern:/^[a-z]{2}(-[A-Z]{2})?$/i,message:"请输入有效的语言格式（如 zh-CN、en-US）",trigger:"blur"}],dhcp_user_id:[{type:"string",message:"DHCP用户ID格式不正确",trigger:"blur"}],stb_type:[{type:"string",message:"机顶盒类型格式不正确",trigger:"blur"}],stb_version:[{type:"string",message:"机顶盒版本格式不正确",trigger:"blur"}],template_name:[{type:"string",message:"模板名称格式不正确",trigger:"blur"}],area_id:[{type:"string",message:"区域ID格式不正确",trigger:"blur"}],user_token:[{type:"string",message:"用户令牌格式不正确",trigger:"blur"}],user_group_id:[{type:"string",message:"用户组ID格式不正确",trigger:"blur"}],software_version:[{type:"string",message:"软件版本格式不正确",trigger:"blur"}],is_smart_stb:[{type:"boolean",message:"请选择是否智能机顶盒",trigger:"change"}],desktop_id:[{type:"string",message:"桌面ID格式不正确",trigger:"blur"}],stb_maker:[{type:"string",message:"机顶盒制造商格式不正确",trigger:"blur"}],vip:[{type:"string",message:"VIP状态格式不正确",trigger:"blur"}]},k=i(null),d=i(!1),c=i(!1),h=async()=>{c.value=!0;try{const u=await N.get(Qe);u.code==200?(_.value={...u.data},D.value={...u.data}):p.error(u.msg||"获取数据失败！")}catch(u){p.error(u.msg||"请求错误！"),console.log(u)}finally{c.value=!1}};h();const V=()=>{if(c.value)return p.info("正在获取数据，请稍后！");d.value=!0},E=()=>{c.value||(k.value.clearValidate(),_.value={...D.value},d.value=!1)},v=()=>{k.value.validate(async u=>{if(u){if(JSON.stringify(_.value)===JSON.stringify(D.value))return p.info("未做任何修改！");c.value=!0;const w={..._.value};try{const z=await N.get(Xe,{params:w});z.code==200?(d.value=!1,X.success({title:"保存配置成功！",showClose:!1}),await h()):p.error(z.msg)}catch(z){p.error(z.msg),console.log(z)}finally{c.value=!1}}})};return(u,n)=>{const w=ie,z=m("Lock"),q=te,S=m("Edit"),I=_e,F=m("Close"),T=m("Check"),W=pe,y=ke,a=De,M=ue,G=he,P=ye,Y=de;return g(),H(O,null,[e(w,{title:"设置系统默认使用的认证数据，当没有匹配区域认证时将使用此配置。",type:"primary","show-icon":"",closable:!1}),o("div",Ge,[o("div",Je,[o("span",Ke,[e(q,{size:20},{default:l(()=>[e(z)]),_:1}),n[0]||(n[0]=o("span",null,"默认认证数据",-1))]),o("div",Ze,[d.value?L("",!0):(g(),x(I,{key:0,type:"primary",size:"large",onClick:V},{icon:l(()=>[e(q,null,{default:l(()=>[e(S)]),_:1})]),default:l(()=>[n[1]||(n[1]=C(" 编辑默认认证 ",-1))]),_:1,__:[1]})),d.value?(g(),x(I,{key:1,type:"danger",size:"large",onClick:E,disabled:c.value},{icon:l(()=>[e(q,null,{default:l(()=>[e(F)]),_:1})]),default:l(()=>[n[2]||(n[2]=C(" 取消 ",-1))]),_:1,__:[2]},8,["disabled"])):L("",!0),d.value?(g(),x(I,{key:2,type:"success",size:"large",onClick:v,loading:c.value},{icon:l(()=>[e(q,null,{default:l(()=>[e(T)]),_:1})]),default:l(()=>[n[3]||(n[3]=C(" 保存配置 ",-1))]),_:1,__:[3]},8,["loading"])):L("",!0)])]),o("div",je,[e(Y,{"label-position":"top","label-width":"auto",model:_.value,rules:A,ref_key:"defaultAuthFormRef",ref:k},{default:l(()=>[e(P,{gutter:20},{default:l(()=>[(g(),H(O,null,le(b,s=>e(G,{xs:24,span:s.prop=="area_name"?24:12,key:s.prop},{default:l(()=>[e(M,{label:s.label,prop:s.prop},{default:l(()=>[s.type==="text"?(g(),x(W,{key:0,modelValue:_.value[s.prop],"onUpdate:modelValue":t=>_.value[s.prop]=t,size:"large",placeholder:s.placeholder,disabled:!d.value,type:"text"},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])):L("",!0),s.type==="number"?(g(),x(W,{key:1,modelValue:_.value[s.prop],"onUpdate:modelValue":t=>_.value[s.prop]=t,modelModifiers:{number:!0},size:"large",placeholder:s.placeholder,disabled:!d.value,type:"number",min:"0"},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])):s.type==="select"?(g(),x(a,{key:2,modelValue:_.value[s.prop],"onUpdate:modelValue":t=>_.value[s.prop]=t,placeholder:"请选择",size:"large",disabled:!d.value},{default:l(()=>[(g(!0),H(O,null,le(s.options,t=>(g(),x(y,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):L("",!0)]),_:2},1032,["label","prop"])]),_:2},1032,["span"])),64))]),_:1})]),_:1},8,["model"])])])],64)}}},el=re(Ye,[["__scopeId","data-v-e80b2ab8"]]),ll={class:"region-auth"},tl={class:"header"},al={class:"title hidden-xs-only"},ol={class:"btn-wrap"},sl={class:"search"},nl={class:"content"},rl=["onClick"],il=["onClick"],ul={class:"tools-bar"},pl={class:"dialog-title"},dl={class:"edit-auth-dialog-content"},_l={class:"auto-fill"},cl={class:"auto-fill-head"},gl={class:"title"},ml={class:"desc"},vl={class:"dialog-footer"},fl={class:"dialog-title"},bl={class:"dialog-footer"},yl="/regionAuth",hl="/regionAuthSearch",Dl="/editRegionAuth",kl="/addRegionAuth",Cl="user_id=02088888888&lang=zh-CN&stb_type=1&dhcp_user_id=99&area_name...",Vl="/deleteRegionAuth",wl={__name:"RegionAuth",setup(ae){const _=i([]),D=i(!1),b=(s,t)=>{Re.alert(t,s+"：")},A=async()=>{D.value=!0;try{const s=await N.get(yl);s.code==200?_.value=s.data:p.error(s.msg||"获取数据失败")}catch(s){p.error(s.msg||"请求错误！"),console.log(s)}finally{D.value=!1}};A();const k=i(""),d=async()=>{D.value=!0;const s={name:k.value};try{const t=await N.get(hl,{params:s});t.code==200?_.value=t.data:p.error(t.msg||"获取数据失败")}catch(t){p.error(t.msg||"请求错误！"),console.log(t)}finally{D.value=!1}},c=i(!1),h=i(!1),V=i(!1);let E=0,v="";const u=i(null),n=i({area_name:"",user_id:"",lang:"",support_hd:"",net_user_id:"",dhcp_user_id:"",authenticator:"",stb_type:"",stb_version:"",conn_type:"",stb_id:"",template_name:"",area_id:"",user_token:"",user_group_id:"",product_package_id:"",mac:"",user_field:"",software_version:"",desktop_id:"",is_smart_stb:!1,stb_maker:"",vip:""}),w=i({}),z={...n.value},q=[{label:"区域名称",type:"text",prop:"area_name",placeholder:"请输入区域名称"},{label:"用户ID (user_id)",type:"text",prop:"user_id",placeholder:"请输入用户ID"},{label:"语言 (lang)",type:"text",prop:"lang",placeholder:"请输入语言,例如:zh-CN"},{label:"DHCP用户ID (dhcp_user_id)",type:"text",prop:"dhcp_user_id",placeholder:"请输入DHCP用户ID"},{label:"认证码 (authenticator)",type:"text",prop:"authenticator",placeholder:"请输入认证码"},{label:"机顶盒类型 (stb_type)",type:"text",prop:"stb_type",placeholder:"请输入机顶盒类型"},{label:"机顶盒版本 (stb_version)",type:"text",prop:"stb_version",placeholder:"请输入机顶盒版本"},{label:"连接类型 (conn_type)",type:"number",prop:"conn_type",placeholder:"请输入连接类型(数字)"},{label:"机顶盒ID (stb_id)",type:"text",prop:"stb_id",placeholder:"请输入机顶盒ID"},{label:"模板名称 (template_name)",type:"text",prop:"template_name",placeholder:"请输入模板名称"},{label:"区域ID (area_id)",type:"text",prop:"area_id",placeholder:"请输入区域ID"},{label:"用户令牌 (user_token)",type:"text",prop:"user_token",placeholder:"请输入用户令牌"},{label:"用户组ID (user_group_id)",type:"text",prop:"user_group_id",placeholder:"请输入用户组ID"},{label:"产品包ID (product_package_id)",type:"text",prop:"product_package_id",placeholder:"请输入产品包ID"},{label:"MAC地址 (mac)",type:"text",prop:"mac",placeholder:"请输入MAC地址,例如:00:11:22:33:44:55"},{label:"用户字段 (user_field)",type:"number",prop:"user_field",placeholder:"请输入用户字段(数字)"},{label:"软件版本 (software_version)",type:"text",prop:"software_version",placeholder:"请输入软件版本"},{label:"是否智能机顶盒 (is_smart_stb)",type:"select",prop:"is_smart_stb",placeholder:"请选择是否为智能机顶盒",options:[{label:"是",value:!0},{label:"否",value:!1}]},{label:"桌面ID (desktop_id)",type:"text",prop:"desktop_id",placeholder:"请输入桌面ID"},{label:"机顶盒制造商 (stb_maker)",type:"text",prop:"stb_maker",placeholder:"请输入机顶盒制造商"},{label:"VIP状态 (vip)",type:"text",prop:"vip",placeholder:"请输入VIP状态"}],S={area_name:[{required:!0,message:"区域名称为必填项",trigger:"blur"}],user_id:[{required:!0,message:"用户ID为必填项",trigger:"blur"}],authenticator:[{required:!0,message:"认证码为必填项",trigger:"blur"}],stb_id:[{required:!0,message:"机顶盒ID为必填项",trigger:"blur"}],mac:[{pattern:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,message:"请输入有效的MAC地址（如 00:11:22:33:44:55 或 00-11-22-33-44-55）",trigger:"blur"}],lang:[{pattern:/^[a-z]{2}(-[A-Z]{2})?$/i,message:"请输入有效的语言格式（如 zh-CN、en-US）",trigger:"blur"}],dhcp_user_id:[{type:"string",message:"DHCP用户ID格式不正确",trigger:"blur"}],stb_type:[{type:"string",message:"机顶盒类型格式不正确",trigger:"blur"}],stb_version:[{type:"string",message:"机顶盒版本格式不正确",trigger:"blur"}],template_name:[{type:"string",message:"模板名称格式不正确",trigger:"blur"}],area_id:[{type:"string",message:"区域ID格式不正确",trigger:"blur"}],user_token:[{type:"string",message:"用户令牌格式不正确",trigger:"blur"}],user_group_id:[{type:"string",message:"用户组ID格式不正确",trigger:"blur"}],software_version:[{type:"string",message:"软件版本格式不正确",trigger:"blur"}],is_smart_stb:[{type:"boolean",message:"请选择是否智能机顶盒",trigger:"change"}],desktop_id:[{type:"string",message:"桌面ID格式不正确",trigger:"blur"}],stb_maker:[{type:"string",message:"机顶盒制造商格式不正确",trigger:"blur"}],vip:[{type:"string",message:"VIP状态格式不正确",trigger:"blur"}]},I=i(""),F=()=>{if(!I.value.trim()===""){I.value="";return}const s=I.value.split("&");for(const t of s){const[K,$]=t.split("=");n.value.hasOwnProperty(K)&&(n.value[K]=$||"")}},T=(s,t)=>{if(D.value)return p.info("正在加载数据，请稍后操作");s==="edit"?(V.value=!0,E=t.id,v=Dl,n.value={...t},w.value={...t}):s==="add"&&(V.value=!1,v=kl,n.value={...z}),u.value&&u.value.clearValidate(),c.value=!0},W=()=>{let s={};V.value?s={id:E,data:n.value}:s=n.value,u.value.validate(async t=>{if(t){if(JSON.stringify(n.value)===JSON.stringify(w.value))return p.info("未修改任何内容");h.value=!0;try{const $=await N.get(v,{params:s});$.code==200?(c.value=!1,X.success({title:V.value?"编辑配置成功!":"添加配置成功!",showClose:!1}),await A(),k.value=""):p.error($.msg||"编辑失败")}catch($){p.error($.msg||"请求错误！"),console.log($)}finally{h.value=!1}}})},y=i(!1),a=i(!1),M=i(""),G={id:0,name:""},P=s=>{if(a.value)return p.info("正在删除中，请稍后");y.value=!0,M.value=s.area_name,G.id=s.id,G.name=s.area_name},Y=async()=>{a.value=!0;const s=G;try{const t=await N.get(Vl,{params:s});t.code==200?(X.success({title:"删除成功!",showClose:!1}),y.value=!1,await A(),k.value=""):p.error(t.msg||"删除失败")}catch(t){p.error(t.msg||"请求错误！"),console.log(t)}finally{a.value=!1}};return(s,t)=>{const K=ie,$=m("Location"),R=te,ee=m("Plus"),B=_e,Z=m("Search"),j=pe,J=Ie,ce=m("Edit"),ge=m("Delete"),me=xe,oe=Ae,ve=ze,se=m("MagicStick"),ne=m("Warning"),fe=Pe,f=ke,be=De,Ue=ue,Ee=he,Me=ye,Se=de,Ce=$e,Fe=we;return g(),H(O,null,[e(K,{title:"管理不同区域的IPTV认证数据，可以为每个区域配置特定的认证信息。",type:"primary","show-icon":"",closable:!1}),o("div",ll,[o("div",tl,[o("span",al,[e(R,{size:20},{default:l(()=>[e($)]),_:1}),t[7]||(t[7]=o("span",null,"区域认证数据",-1))]),o("div",ol,[e(B,{type:"primary",size:"large",onClick:t[0]||(t[0]=r=>T("add"))},{icon:l(()=>[e(R,null,{default:l(()=>[e(ee)]),_:1})]),default:l(()=>[t[8]||(t[8]=C(" 添加区域认证 ",-1))]),_:1,__:[8]})])]),o("div",sl,[e(j,{size:"large",placeholder:"搜索区域",modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=r=>k.value=r),clearable:""},{prefix:l(()=>[e(R,null,{default:l(()=>[e(Z)]),_:1})]),append:l(()=>[e(B,{onClick:d},{default:l(()=>t[9]||(t[9]=[C("搜索",-1)])),_:1,__:[9]})]),_:1},8,["modelValue"])]),o("div",nl,[Ve((g(),x(ve,{data:_.value,"header-row-class-name":"table-header"},{empty:l(()=>[e(oe,{"image-size":100,class:"table-empty",description:"暂无数据"})]),default:l(()=>[e(J,{label:"#",type:"index",width:"50"}),e(J,{prop:"area_name",label:"区域名称","min-width":"100","show-overflow-tooltip":""}),e(J,{prop:"user_id",label:"用户ID","min-width":"150","show-overflow-tooltip":""}),e(J,{prop:"stb_id",label:"机顶盒ID","min-width":"140","show-overflow-tooltip":"","tooltip-formatter":()=>"点击查看详情"},{default:l(({row:r})=>[o("span",{onClick:U=>b("机顶盒ID",r.stb_id)},Q(r.stb_id),9,rl)]),_:1}),e(J,{prop:"authenticator",label:"认证码","min-width":"120","show-overflow-tooltip":"","tooltip-formatter":()=>"点击查看详情"},{default:l(({row:r})=>[o("span",{onClick:U=>b("认证码",r.authenticator)},Q(r.authenticator),9,il)]),_:1}),e(J,{prop:"name",label:"操作",width:"120"},{default:l(({row:r})=>[o("div",ul,[e(me,null,{default:l(()=>[e(B,{type:"primary",onClick:U=>T("edit",r)},{default:l(()=>[e(R,null,{default:l(()=>[e(ce)]),_:1})]),_:2},1032,["onClick"]),e(B,{onClick:U=>P(r),type:"danger"},{default:l(()=>[e(R,null,{default:l(()=>[e(ge)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[Fe,D.value]])])]),e(Ce,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=r=>c.value=r),title:"Tips",width:"700","align-center":"",class:"my-dialog primary dialog-max-height"},{header:l(()=>[o("div",pl,[e(R,{size:20},{default:l(()=>[e($)]),_:1}),o("span",null,Q(V.value?"编辑":"添加")+"区域认证",1)])]),footer:l(()=>[o("div",vl,[e(B,{onClick:t[3]||(t[3]=r=>c.value=!1)},{default:l(()=>t[12]||(t[12]=[C("取消",-1)])),_:1,__:[12]}),e(B,{type:"primary",onClick:W,loading:h.value},{default:l(()=>t[13]||(t[13]=[C("确认",-1)])),_:1,__:[13]},8,["loading"])])]),default:l(()=>[o("div",dl,[o("div",_l,[o("div",cl,[o("span",gl,[e(R,null,{default:l(()=>[e(se)]),_:1}),t[10]||(t[10]=o("span",null,"一键识别填充",-1))]),o("span",{class:"btn",onClick:F},"识别")]),e(j,{modelValue:I.value,"onUpdate:modelValue":t[2]||(t[2]=r=>I.value=r),rows:2,type:"textarea",placeholder:Cl,autosize:{minRows:3}},null,8,["modelValue"]),o("p",ml,[e(R,{size:16},{default:l(()=>[e(ne)]),_:1}),t[11]||(t[11]=o("span",null,' 将完整的认证字符串粘贴到上方文本框，然后点击"自动识别"按钮自动填充下方表单',-1))])]),e(fe),e(Se,{"label-position":"top","label-width":"auto",ref_key:"saveAuthDialogFormRef",ref:u,rules:S,model:n.value},{default:l(()=>[e(Me,{gutter:20},{default:l(()=>[(g(),H(O,null,le(q,r=>e(Ee,{xs:24,span:r.prop=="area_name"?24:12,key:r.prop},{default:l(()=>[e(Ue,{label:r.label,prop:r.prop},{default:l(()=>[r.type==="text"?(g(),x(j,{key:0,modelValue:n.value[r.prop],"onUpdate:modelValue":U=>n.value[r.prop]=U,size:"large",placeholder:r.placeholder,type:"text"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):L("",!0),r.type==="number"?(g(),x(j,{key:1,modelValue:n.value[r.prop],"onUpdate:modelValue":U=>n.value[r.prop]=U,modelModifiers:{number:!0},size:"large",placeholder:r.placeholder,type:"number",min:"0"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):L("",!0),r.type==="select"?(g(),x(be,{key:2,modelValue:n.value[r.prop],"onUpdate:modelValue":U=>n.value[r.prop]=U,placeholder:"请选择",size:"large"},{default:l(()=>[(g(!0),H(O,null,le(r.options,U=>(g(),x(f,{key:U.value,label:U.label,value:U.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):L("",!0)]),_:2},1032,["label","prop"])]),_:2},1032,["span"])),64))]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"]),e(Ce,{modelValue:y.value,"onUpdate:modelValue":t[6]||(t[6]=r=>y.value=r),title:"Tips",width:"500","align-center":"",class:"my-dialog danger"},{header:l(()=>[o("div",fl,[e(R,{size:20},{default:l(()=>[e(ne)]),_:1}),t[14]||(t[14]=o("span",null,"删除确认",-1))])]),footer:l(()=>[o("div",bl,[e(B,{onClick:t[5]||(t[5]=r=>y.value=!1)},{default:l(()=>t[15]||(t[15]=[C("取消",-1)])),_:1,__:[15]}),e(B,{type:"danger",onClick:Y,loading:a.value},{default:l(()=>t[16]||(t[16]=[C("确认",-1)])),_:1,__:[16]},8,["loading"])])]),default:l(()=>[C(' 确定要删除"'+Q(M.value)+'"EPG认证数据吗？此操作不可恢复。 ',1)]),_:1},8,["modelValue"])],64)}}},Il=re(wl,[["__scopeId","data-v-3e728048"]]),xl={class:"channel-mapping"},Al={class:"header"},zl={class:"title hidden-xs-only"},$l={class:"btn-wrap"},Ul={class:"content"},El={class:"tools-bar"},Ml={class:"dialog-title"},Sl={class:"dialog-footer"},Fl={class:"dialog-title"},Pl={class:"dialog-footer"},Rl="/mappings",Ll="/addMappings",Nl="/editMappings",ql="/deleteMappings",Tl={__name:"Mappings",setup(ae){const _=i([]),D=i(!1),b=i(""),A=i("area_name"),k=[{value:"area_name",label:"区域名称"},{value:"channel_id",label:"频道标识号"}],d=async()=>{const y={dondition:A.value,value:b.value};D.value=!0;try{const a=await N.get(Rl,{params:y});a.code==200?(_.value=a.data,b.value=""):p.error(a.msg||"获取数据失败")}catch(a){p.error(a.msg||"请求失败！"),console.log(a)}finally{D.value=!1}};d();const c=i(!1),h=i(!1),V=i(!1);let E="";const v=i({channel_id:"",area_name:""}),u=i(null),n={...v.value},w={channel_id:[{required:!0,message:"请输入频道ID",trigger:"blur"}],area_name:[{required:!0,message:"请输入区域名称",trigger:"blur"}]},z=(y,a)=>{if(h.value)return p.info("正在处理中，请稍后重试");c.value=!0,u.value&&u.value.clearValidate(),y==="add"?(V.value=!1,E=Ll,v.value={...n}):y==="edit"&&(V.value=!0,E=Nl,v.value={...a})},q=()=>{u.value.validate(async y=>{if(y){let a={};V.value?a={id:v.value.id,data:{channel_id:v.value.channel_id,area_name:v.value.area_name}}:a={channel_id:v.value.channel_id,area_name:v.value.area_name},h.value=!0;try{const M=await N.get(E,{params:a});M.code==200?(c.value=!1,X.success({title:V.value?"编辑成功！":"添加成功！",showClose:!1}),await d()):p.error(M.msg||"保存失败")}catch(M){p.error(M.msg||"请求失败！"),console.log(M)}finally{h.value=!1}}})},S=i(!1),I=i(!1),F=i({}),T=y=>{if(I.value)return p.info("正在处理中，请稍后重试");F.value={...y},S.value=!0},W=async()=>{const y={channel_id:F.value.channel_id};I.value=!0;try{const a=await N.get(ql,{params:y});a.code==200?(S.value=!1,X.success({title:"删除成功！",showClose:!1}),await d()):p.error(a.msg||"删除失败")}catch(a){p.error(a.msg||"请求失败！"),console.log(a)}finally{I.value=!1}};return(y,a)=>{const M=ie,G=m("Aim"),P=te,Y=m("Plus"),s=_e,t=ke,K=De,$=he,R=m("Search"),ee=pe,B=ye,Z=Ie,j=m("Edit"),J=m("Delete"),ce=xe,ge=Ae,me=ze,oe=ue,ve=de,se=$e,ne=m("Warning"),fe=we;return g(),H(O,null,[e(M,{title:"配置频道与区域的对应关系，用于确定使用哪个区域的EPG数据",type:"primary","show-icon":"",closable:!1}),o("div",xl,[o("div",Al,[o("span",zl,[e(P,{size:20},{default:l(()=>[e(G)]),_:1}),a[9]||(a[9]=o("span",null,"频道区域映射",-1))]),o("div",$l,[e(s,{type:"primary",size:"large",onClick:a[0]||(a[0]=f=>z("add"))},{icon:l(()=>[e(P,null,{default:l(()=>[e(Y)]),_:1})]),default:l(()=>[a[10]||(a[10]=C(" 添加频道映射 ",-1))]),_:1,__:[10]})])]),e(B,{gutter:10},{default:l(()=>[e($,{xs:24,span:12,class:"select"},{default:l(()=>[a[11]||(a[11]=o("span",null,"搜索条件：",-1)),e(K,{modelValue:A.value,"onUpdate:modelValue":a[1]||(a[1]=f=>A.value=f),placeholder:"Select",size:"large",onChange:d},{default:l(()=>[(g(),H(O,null,le(k,f=>e(t,{key:f.value,label:f.label,value:f.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1,__:[11]}),e($,{xs:24,span:12},{default:l(()=>[e(ee,{size:"large",placeholder:"搜索区域",modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=f=>b.value=f)},{append:l(()=>[e(s,{onClick:d},{default:l(()=>[e(P,null,{default:l(()=>[e(R)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o("div",Ul,[Ve((g(),x(me,{data:_.value,"header-row-class-name":"table-header"},{empty:l(()=>[e(ge,{"image-size":100,class:"table-empty",description:"暂无数据"})]),default:l(()=>[e(Z,{label:"#",type:"index",width:"40"}),e(Z,{prop:"channel_id",label:"频道ID"}),e(Z,{prop:"area_name",label:"区域名称","min-width":"150","show-overflow-tooltip":""}),e(Z,{prop:"name",label:"操作",width:"120"},{default:l(({row:f})=>[o("div",El,[e(ce,null,{default:l(()=>[e(s,{type:"primary",onClick:be=>z("edit",f)},{default:l(()=>[e(P,null,{default:l(()=>[e(j)]),_:1})]),_:2},1032,["onClick"]),e(s,{type:"danger",onClick:be=>T(f)},{default:l(()=>[e(P,null,{default:l(()=>[e(J)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[fe,D.value]])])]),e(se,{modelValue:c.value,"onUpdate:modelValue":a[6]||(a[6]=f=>c.value=f),title:"Tips",width:"500","align-center":"",class:"my-dialog primary"},{header:l(()=>[o("div",Ml,[e(P,{size:20},{default:l(()=>[e(G)]),_:1}),o("span",null,Q(V.value?"编辑":"添加")+"频道映射",1)])]),footer:l(()=>[o("div",Sl,[e(s,{onClick:a[5]||(a[5]=f=>c.value=!1)},{default:l(()=>a[12]||(a[12]=[C("取消",-1)])),_:1,__:[12]}),e(s,{type:"primary",onClick:q,loading:h.value},{default:l(()=>a[13]||(a[13]=[C("确认",-1)])),_:1,__:[13]},8,["loading"])])]),default:l(()=>[e(ve,{model:v.value,rules:w,"label-position":"top",ref_key:"saveMappingFormRef",ref:u},{default:l(()=>[e(oe,{prop:"channel_id",label:"频道ID"},{default:l(()=>[e(ee,{modelValue:v.value.channel_id,"onUpdate:modelValue":a[3]||(a[3]=f=>v.value.channel_id=f),placeholder:"请输入频道ID",size:"large"},null,8,["modelValue"])]),_:1}),e(oe,{prop:"area_name",label:"区域名称"},{default:l(()=>[e(ee,{modelValue:v.value.area_name,"onUpdate:modelValue":a[4]||(a[4]=f=>v.value.area_name=f),placeholder:"请输入区域名称",size:"large"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(se,{modelValue:S.value,"onUpdate:modelValue":a[8]||(a[8]=f=>S.value=f),title:"Tips",width:"500","align-center":"",class:"my-dialog danger"},{header:l(()=>[o("div",Fl,[e(P,{size:20},{default:l(()=>[e(ne)]),_:1}),a[14]||(a[14]=o("span",null,"删除确认",-1))])]),footer:l(()=>[o("div",Pl,[e(s,{onClick:a[7]||(a[7]=f=>S.value=!1)},{default:l(()=>a[15]||(a[15]=[C("取消",-1)])),_:1,__:[15]}),e(s,{type:"danger",onClick:W,loading:I.value},{default:l(()=>a[16]||(a[16]=[C("确认",-1)])),_:1,__:[16]},8,["loading"])])]),default:l(()=>[C(' 确定要删除"'+Q(F.value.area_name)+'"区域映射吗？此操作不可恢复。 ',1)]),_:1},8,["modelValue"])],64)}}},Bl=re(Tl,[["__scopeId","data-v-9e13cdef"]]),Hl={class:"epg"},Ol={class:"tabs-label"},Wl={class:"tabs-label"},Gl={class:"tabs-label"},Jl={class:"tabs-label"},tt={__name:"Epg",setup(ae){const _=i("serverConfig");return(D,b)=>{const A=m("Coin"),k=te,d=Ne,c=m("Key"),h=m("Location"),V=m("Switch"),E=Le;return g(),H("main",Hl,[e(E,{modelValue:_.value,"onUpdate:modelValue":b[0]||(b[0]=v=>_.value=v),type:"border-card"},{default:l(()=>[e(d,{name:"serverConfig"},{label:l(()=>[o("span",Ol,[e(k,{size:16,class:"tabs-icon"},{default:l(()=>[e(A)]),_:1}),b[1]||(b[1]=o("span",{class:"tabs-title"},"IPTV服务器配置",-1))])]),default:l(()=>[e(We)]),_:1}),e(d,{name:"defaultAuth"},{label:l(()=>[o("span",Wl,[e(k,{size:16,class:"tabs-icon"},{default:l(()=>[e(c)]),_:1}),b[2]||(b[2]=o("span",{class:"tabs-title"},"默认认证",-1))])]),default:l(()=>[e(el)]),_:1}),e(d,{name:"regionAuth"},{label:l(()=>[o("span",Gl,[e(k,{size:16,class:"tabs-icon"},{default:l(()=>[e(h)]),_:1}),b[3]||(b[3]=o("span",{class:"tabs-title"},"区域认证",-1))])]),default:l(()=>[e(Il)]),_:1}),e(d,{name:"channelMapping"},{label:l(()=>[o("span",Jl,[e(k,{size:16,class:"tabs-icon"},{default:l(()=>[e(V)]),_:1}),b[4]||(b[4]=o("span",{class:"tabs-title"},"频道映射",-1))])]),default:l(()=>[e(Bl)]),_:1})]),_:1},8,["modelValue"])])}}};export{tt as default};
